{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma =\r\n  globalThis.prisma ??\r\n  new PrismaClient({\r\n    log: [\"error\", \"warn\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SACX,WAAW,MAAM,IACjB,IAAI,gPAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/app/api/inventar/route.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function GET(req: Request) {\r\n  const url = new URL(req.url);\r\n  const q = (url.searchParams.get(\"q\") ?? \"\").trim();\r\n\r\n  const rows = await prisma.inventarPjese.findMany({\r\n    where: q\r\n      ? {\r\n          OR: [\r\n            { emri: { contains: q, mode: \"insensitive\" } },\r\n            { kodi: { contains: q, mode: \"insensitive\" } },\r\n            { marka: { contains: q, mode: \"insensitive\" } },\r\n            { modeli: { contains: q, mode: \"insensitive\" } },\r\n          ],\r\n        }\r\n      : {},\r\n    orderBy: { inventarId: \"desc\" },\r\n    include: { furnizues: true },\r\n  });\r\n\r\n  return NextResponse.json(\r\n    rows.map((p) => ({\r\n      inventarId: p.inventarId.toString(),\r\n      kodi: p.kodi ?? \"\",\r\n      emri: p.emri,\r\n      marka: p.marka ?? \"\",\r\n      modeli: p.modeli ?? \"\",\r\n      sasiaStok: p.sasiaStok,\r\n      cmimiBlerje: p.cmimiBlerje.toString(),\r\n      cmimiShitje: p.cmimiShitje.toString(),\r\n      furnizuesId: p.furnizuesId?.toString() ?? \"\",\r\n      furnizuesEmri: p.furnizues?.emri ?? \"\",\r\n    }))\r\n  );\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const body = await req.json().catch(() => ({}));\r\n\r\n  const emri = String(body?.emri ?? \"\").trim();\r\n  if (!emri) return NextResponse.json({ error: \"Emri është i detyrueshëm\" }, { status: 400 });\r\n\r\n  const row = await prisma.inventarPjese.create({\r\n    data: {\r\n      kodi: body?.kodi ? String(body.kodi).trim() : null,\r\n      emri,\r\n      marka: body?.marka ? String(body.marka).trim() : null,\r\n      modeli: body?.modeli ? String(body.modeli).trim() : null,\r\n      sasiaStok: body?.sasiaStok ? Number(body.sasiaStok) : 0,\r\n      cmimiBlerje: body?.cmimiBlerje !== \"\" && body?.cmimiBlerje != null ? Number(body.cmimiBlerje) : 0,\r\n      cmimiShitje: body?.cmimiShitje !== \"\" && body?.cmimiShitje != null ? Number(body.cmimiShitje) : 0,\r\n      furnizuesId: body?.furnizuesId ? BigInt(String(body.furnizuesId)) : null,\r\n    },\r\n  });\r\n\r\n  return NextResponse.json({ ok: true, inventarId: row.inventarId.toString() });\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;IAC3B,MAAM,IAAI,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,IAAI;IAEhD,MAAM,OAAO,MAAM,0KAAM,CAAC,aAAa,CAAC,QAAQ,CAAC;QAC/C,OAAO,IACH;YACE,IAAI;gBACF;oBAAE,MAAM;wBAAE,UAAU;wBAAG,MAAM;oBAAc;gBAAE;gBAC7C;oBAAE,MAAM;wBAAE,UAAU;wBAAG,MAAM;oBAAc;gBAAE;gBAC7C;oBAAE,OAAO;wBAAE,UAAU;wBAAG,MAAM;oBAAc;gBAAE;gBAC9C;oBAAE,QAAQ;wBAAE,UAAU;wBAAG,MAAM;oBAAc;gBAAE;aAChD;QACH,IACA,CAAC;QACL,SAAS;YAAE,YAAY;QAAO;QAC9B,SAAS;YAAE,WAAW;QAAK;IAC7B;IAEA,OAAO,0LAAY,CAAC,IAAI,CACtB,KAAK,GAAG,CAAC,CAAC,IAAM,CAAC;YACf,YAAY,EAAE,UAAU,CAAC,QAAQ;YACjC,MAAM,EAAE,IAAI,IAAI;YAChB,MAAM,EAAE,IAAI;YACZ,OAAO,EAAE,KAAK,IAAI;YAClB,QAAQ,EAAE,MAAM,IAAI;YACpB,WAAW,EAAE,SAAS;YACtB,aAAa,EAAE,WAAW,CAAC,QAAQ;YACnC,aAAa,EAAE,WAAW,CAAC,QAAQ;YACnC,aAAa,EAAE,WAAW,EAAE,cAAc;YAC1C,eAAe,EAAE,SAAS,EAAE,QAAQ;QACtC,CAAC;AAEL;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAE7C,MAAM,OAAO,OAAO,MAAM,QAAQ,IAAI,IAAI;IAC1C,IAAI,CAAC,MAAM,OAAO,0LAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAA2B,GAAG;QAAE,QAAQ;IAAI;IAEzF,MAAM,MAAM,MAAM,0KAAM,CAAC,aAAa,CAAC,MAAM,CAAC;QAC5C,MAAM;YACJ,MAAM,MAAM,OAAO,OAAO,KAAK,IAAI,EAAE,IAAI,KAAK;YAC9C;YACA,OAAO,MAAM,QAAQ,OAAO,KAAK,KAAK,EAAE,IAAI,KAAK;YACjD,QAAQ,MAAM,SAAS,OAAO,KAAK,MAAM,EAAE,IAAI,KAAK;YACpD,WAAW,MAAM,YAAY,OAAO,KAAK,SAAS,IAAI;YACtD,aAAa,MAAM,gBAAgB,MAAM,MAAM,eAAe,OAAO,OAAO,KAAK,WAAW,IAAI;YAChG,aAAa,MAAM,gBAAgB,MAAM,MAAM,eAAe,OAAO,OAAO,KAAK,WAAW,IAAI;YAChG,aAAa,MAAM,cAAc,OAAO,OAAO,KAAK,WAAW,KAAK;QACtE;IACF;IAEA,OAAO,0LAAY,CAAC,IAAI,CAAC;QAAE,IAAI;QAAM,YAAY,IAAI,UAAU,CAAC,QAAQ;IAAG;AAC7E"}}]
}