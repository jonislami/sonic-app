{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma =\r\n  globalThis.prisma ??\r\n  new PrismaClient({\r\n    log: [\"error\", \"warn\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SACX,WAAW,MAAM,IACjB,IAAI,gPAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/app/api/automjete/route.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const rows = await prisma.automjet.findMany({\r\n      include: { klient: true },\r\n      orderBy: { automjetId: \"desc\" },\r\n    });\r\n\r\n    const data = rows.map((a) => ({\r\n      automjetId: a.automjetId.toString(),\r\n      klientId: a.klientId.toString(),\r\n      marka: a.marka ?? \"\",\r\n      modeli: a.modeli ?? \"\",\r\n      viti: a.viti ?? null,\r\n      targa: a.targa ?? \"\",\r\n      vin: a.vin ?? \"\",\r\n      motori: a.motori ?? \"\", // ✅ SHTUAR\r\n      kmAktuale: a.kmAktuale ? a.kmAktuale.toString() : \"\",\r\n      klient: {\r\n        klientId: a.klient.klientId.toString(),\r\n        emri: a.klient.emri ?? \"\",\r\n        mbiemri: a.klient.mbiemri ?? \"\",\r\n        telefoni: a.klient.telefoni ?? \"\",\r\n        email: a.klient.email ?? \"\",\r\n      },\r\n    }));\r\n\r\n    return NextResponse.json(data);\r\n  } catch (e: any) {\r\n    console.error(\"GET /api/automjete error:\", e);\r\n    return NextResponse.json(\r\n      { error: \"Gabim gjatë marrjes së automjeteve\", detail: String(e?.message ?? e) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json().catch(() => ({}));\r\n\r\n    const klientIdStr = String(body?.klientId ?? \"\").trim();\r\n    if (!klientIdStr) {\r\n      return NextResponse.json({ error: \"Klienti është i detyrueshëm\" }, { status: 400 });\r\n    }\r\n\r\n    const klientId = BigInt(klientIdStr);\r\n\r\n    const marka = String(body?.marka ?? \"\").trim();\r\n    const modeli = String(body?.modeli ?? \"\").trim();\r\n    const viti = body?.viti !== undefined && body?.viti !== null && String(body.viti).trim() !== \"\"\r\n      ? Number(body.viti)\r\n      : null;\r\n    const targa = String(body?.targa ?? \"\").trim();\r\n    const vin = String(body?.vin ?? \"\").trim();\r\n\r\n    const motori = String(body?.motori ?? \"\").trim(); // ✅ SHTUAR\r\n\r\n    const row = await prisma.automjet.create({\r\n      data: {\r\n        klientId,\r\n        marka: marka || null,\r\n        modeli: modeli || null,\r\n        viti,\r\n        targa: targa || null,\r\n        vin: vin || null,\r\n        motori: motori || null, // ✅ SHTUAR\r\n      },\r\n    });\r\n\r\n    return NextResponse.json({ ok: true, automjetId: row.automjetId.toString() });\r\n  } catch (e: any) {\r\n    console.error(\"POST /api/automjete error:\", e);\r\n    return NextResponse.json(\r\n      { error: \"Gabim gjatë krijimit të automjetit\", detail: String(e?.message ?? e) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,MAAM,0KAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC1C,SAAS;gBAAE,QAAQ;YAAK;YACxB,SAAS;gBAAE,YAAY;YAAO;QAChC;QAEA,MAAM,OAAO,KAAK,GAAG,CAAC,CAAC,IAAM,CAAC;gBAC5B,YAAY,EAAE,UAAU,CAAC,QAAQ;gBACjC,UAAU,EAAE,QAAQ,CAAC,QAAQ;gBAC7B,OAAO,EAAE,KAAK,IAAI;gBAClB,QAAQ,EAAE,MAAM,IAAI;gBACpB,MAAM,EAAE,IAAI,IAAI;gBAChB,OAAO,EAAE,KAAK,IAAI;gBAClB,KAAK,EAAE,GAAG,IAAI;gBACd,QAAQ,EAAE,MAAM,IAAI;gBACpB,WAAW,EAAE,SAAS,GAAG,EAAE,SAAS,CAAC,QAAQ,KAAK;gBAClD,QAAQ;oBACN,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ;oBACpC,MAAM,EAAE,MAAM,CAAC,IAAI,IAAI;oBACvB,SAAS,EAAE,MAAM,CAAC,OAAO,IAAI;oBAC7B,UAAU,EAAE,MAAM,CAAC,QAAQ,IAAI;oBAC/B,OAAO,EAAE,MAAM,CAAC,KAAK,IAAI;gBAC3B;YACF,CAAC;QAED,OAAO,0LAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,0LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAsC,QAAQ,OAAO,GAAG,WAAW;QAAG,GAC/E;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAE7C,MAAM,cAAc,OAAO,MAAM,YAAY,IAAI,IAAI;QACrD,IAAI,CAAC,aAAa;YAChB,OAAO,0LAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,MAAM,WAAW,OAAO;QAExB,MAAM,QAAQ,OAAO,MAAM,SAAS,IAAI,IAAI;QAC5C,MAAM,SAAS,OAAO,MAAM,UAAU,IAAI,IAAI;QAC9C,MAAM,OAAO,MAAM,SAAS,aAAa,MAAM,SAAS,QAAQ,OAAO,KAAK,IAAI,EAAE,IAAI,OAAO,KACzF,OAAO,KAAK,IAAI,IAChB;QACJ,MAAM,QAAQ,OAAO,MAAM,SAAS,IAAI,IAAI;QAC5C,MAAM,MAAM,OAAO,MAAM,OAAO,IAAI,IAAI;QAExC,MAAM,SAAS,OAAO,MAAM,UAAU,IAAI,IAAI,IAAI,WAAW;QAE7D,MAAM,MAAM,MAAM,0KAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YACvC,MAAM;gBACJ;gBACA,OAAO,SAAS;gBAChB,QAAQ,UAAU;gBAClB;gBACA,OAAO,SAAS;gBAChB,KAAK,OAAO;gBACZ,QAAQ,UAAU;YACpB;QACF;QAEA,OAAO,0LAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM,YAAY,IAAI,UAAU,CAAC,QAAQ;QAAG;IAC7E,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,0LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAsC,QAAQ,OAAO,GAAG,WAAW;QAAG,GAC/E;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}