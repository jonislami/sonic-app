{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma =\r\n  globalThis.prisma ??\r\n  new PrismaClient({\r\n    log: [\"error\", \"warn\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SACX,WAAW,MAAM,IACjB,IAAI,gPAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/app/api/inspektime/route.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function GET(req: Request) {\r\n  const url = new URL(req.url);\r\n  const q = (url.searchParams.get(\"q\") ?? \"\").trim();\r\n\r\n  const rows = await prisma.inspektim.findMany({\r\n    where: q\r\n      ? {\r\n          OR: [\r\n            { automjet: { targa: { contains: q, mode: \"insensitive\" } } },\r\n            { automjet: { marka: { contains: q, mode: \"insensitive\" } } },\r\n            { automjet: { modeli: { contains: q, mode: \"insensitive\" } } },\r\n            { automjet: { klient: { emri: { contains: q, mode: \"insensitive\" } } } },\r\n            { automjet: { klient: { mbiemri: { contains: q, mode: \"insensitive\" } } } },\r\n          ],\r\n        }\r\n      : undefined,\r\n    orderBy: { data: \"desc\" },\r\n    include: { automjet: { include: { klient: true } } },\r\n    take: 300,\r\n  });\r\n\r\n  return NextResponse.json(\r\n    rows.map((x) => ({\r\n      inspektimId: x.inspektimId.toString(),\r\n      data: x.data.toISOString(),\r\n      statusi: x.statusi,\r\n      km: x.km ? x.km.toString() : \"\",\r\n      automjet: {\r\n        automjetId: x.automjetId.toString(),\r\n        marka: x.automjet.marka ?? \"\",\r\n        modeli: x.automjet.modeli ?? \"\",\r\n        viti: x.automjet.viti ?? \"\",\r\n        targa: x.automjet.targa ?? \"\",\r\n      },\r\n      klient: {\r\n        klientId: x.automjet.klientId.toString(),\r\n        emri: x.automjet.klient.emri ?? \"\",\r\n        mbiemri: x.automjet.klient.mbiemri ?? \"\",\r\n        telefoni: x.automjet.klient.telefoni ?? \"\",\r\n      },\r\n    }))\r\n  );\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const body = await req.json().catch(() => ({}));\r\n  const automjetId = BigInt(String(body?.automjetId ?? \"0\").trim().replace(/n$/, \"\"));\r\n\r\n  if (!automjetId || automjetId === BigInt(0)) {\r\n    return NextResponse.json({ error: \"automjetId është i detyrueshëm\" }, { status: 400 });\r\n  }\r\n\r\n  const row = await prisma.inspektim.create({\r\n    data: {\r\n      automjetId,\r\n      statusi: \"Draft\",\r\n      km: null,\r\n      komente: null,\r\n      demtimeJson: null,\r\n    },\r\n  });\r\n\r\n  return NextResponse.json({ ok: true, inspektimId: row.inspektimId.toString() });\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;IAC3B,MAAM,IAAI,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,IAAI;IAEhD,MAAM,OAAO,MAAM,0KAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QAC3C,OAAO,IACH;YACE,IAAI;gBACF;oBAAE,UAAU;wBAAE,OAAO;4BAAE,UAAU;4BAAG,MAAM;wBAAc;oBAAE;gBAAE;gBAC5D;oBAAE,UAAU;wBAAE,OAAO;4BAAE,UAAU;4BAAG,MAAM;wBAAc;oBAAE;gBAAE;gBAC5D;oBAAE,UAAU;wBAAE,QAAQ;4BAAE,UAAU;4BAAG,MAAM;wBAAc;oBAAE;gBAAE;gBAC7D;oBAAE,UAAU;wBAAE,QAAQ;4BAAE,MAAM;gCAAE,UAAU;gCAAG,MAAM;4BAAc;wBAAE;oBAAE;gBAAE;gBACvE;oBAAE,UAAU;wBAAE,QAAQ;4BAAE,SAAS;gCAAE,UAAU;gCAAG,MAAM;4BAAc;wBAAE;oBAAE;gBAAE;aAC3E;QACH,IACA;QACJ,SAAS;YAAE,MAAM;QAAO;QACxB,SAAS;YAAE,UAAU;gBAAE,SAAS;oBAAE,QAAQ;gBAAK;YAAE;QAAE;QACnD,MAAM;IACR;IAEA,OAAO,0LAAY,CAAC,IAAI,CACtB,KAAK,GAAG,CAAC,CAAC,IAAM,CAAC;YACf,aAAa,EAAE,WAAW,CAAC,QAAQ;YACnC,MAAM,EAAE,IAAI,CAAC,WAAW;YACxB,SAAS,EAAE,OAAO;YAClB,IAAI,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,QAAQ,KAAK;YAC7B,UAAU;gBACR,YAAY,EAAE,UAAU,CAAC,QAAQ;gBACjC,OAAO,EAAE,QAAQ,CAAC,KAAK,IAAI;gBAC3B,QAAQ,EAAE,QAAQ,CAAC,MAAM,IAAI;gBAC7B,MAAM,EAAE,QAAQ,CAAC,IAAI,IAAI;gBACzB,OAAO,EAAE,QAAQ,CAAC,KAAK,IAAI;YAC7B;YACA,QAAQ;gBACN,UAAU,EAAE,QAAQ,CAAC,QAAQ,CAAC,QAAQ;gBACtC,MAAM,EAAE,QAAQ,CAAC,MAAM,CAAC,IAAI,IAAI;gBAChC,SAAS,EAAE,QAAQ,CAAC,MAAM,CAAC,OAAO,IAAI;gBACtC,UAAU,EAAE,QAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI;YAC1C;QACF,CAAC;AAEL;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAC7C,MAAM,aAAa,OAAO,OAAO,MAAM,cAAc,KAAK,IAAI,GAAG,OAAO,CAAC,MAAM;IAE/E,IAAI,CAAC,cAAc,eAAe,OAAO,IAAI;QAC3C,OAAO,0LAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiC,GAAG;YAAE,QAAQ;QAAI;IACtF;IAEA,MAAM,MAAM,MAAM,0KAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACxC,MAAM;YACJ;YACA,SAAS;YACT,IAAI;YACJ,SAAS;YACT,aAAa;QACf;IACF;IAEA,OAAO,0LAAY,CAAC,IAAI,CAAC;QAAE,IAAI;QAAM,aAAa,IAAI,WAAW,CAAC,QAAQ;IAAG;AAC/E"}}]
}