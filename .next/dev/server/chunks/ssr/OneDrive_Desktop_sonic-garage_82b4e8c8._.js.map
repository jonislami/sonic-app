{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/app/servise/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\ntype Row = {\r\n  servisId: string;\r\n  dataServisit: string;\r\n  statusi: string;\r\n  kmNeServis: string | null;\r\n  pershkrimi: string | null;\r\n  klient: { emri: string; mbiemri: string | null; telefoni: string | null };\r\n  automjet: { marka: string | null; modeli: string | null; viti: number | null; targa: string | null };\r\n  total: string;\r\n  paguar: string;\r\n  borxh: string;\r\n};\r\n\r\nexport default function ServiseListPage() {\r\n  const [items, setItems] = useState<Row[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [q, setQ] = useState(\"\");\r\n  const [statusi, setStatusi] = useState(\"\");\r\n  const [ym, setYm] = useState(\"\");\r\n\r\n  async function load() {\r\n    setLoading(true);\r\n    const params = new URLSearchParams();\r\n    if (q.trim()) params.set(\"q\", q.trim());\r\n    if (statusi) params.set(\"statusi\", statusi);\r\n    if (ym) params.set(\"ym\", ym);\r\n\r\n    const res = await fetch(`/api/servise?${params.toString()}`);\r\n    setItems(await res.json());\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(() => { load(); }, []);\r\n\r\n  const sum = useMemo(() => {\r\n    const total = items.reduce((s, x) => s + Number(x.total), 0);\r\n    const paguar = items.reduce((s, x) => s + Number(x.paguar), 0);\r\n    return { total, paguar, borxh: total - paguar };\r\n  }, [items]);\r\n\r\n  async function delServis(id: string) {\r\n  if (!confirm(\"Me fshi këtë servis?\")) return;\r\n\r\n  const res = await fetch(`/api/servise/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n\r\n  const d = await res.json().catch(() => ({}));\r\n\r\n  if (!res.ok) {\r\n    alert(d?.detail ?? d?.error ?? \"Gabim gjatë fshirjes së servisit\");\r\n    return;\r\n  }\r\n\r\n  // rifresko listën\r\n  window.location.reload();\r\n}\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-6 text-gray-900\">\r\n      <div className=\"flex flex-col gap-3 md:flex-row md:items-end md:justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold\">Servise</h1>\r\n          <p className=\"text-sm text-gray-700\">Kërko dhe filtro të gjitha serviset.</p>\r\n        </div>\r\n\r\n        <div className=\"text-right text-sm\">\r\n          <div className=\"text-gray-700\">Totali: <span className=\"font-semibold\">{sum.total.toFixed(2)} €</span></div>\r\n          <div className=\"text-gray-700\">Paguar: <span className=\"font-semibold\">{sum.paguar.toFixed(2)} €</span></div>\r\n          <div className={`font-semibold ${sum.borxh <= 0 ? \"text-green-700\" : \"text-red-700\"}`}>\r\n            Borxh: {sum.borxh.toFixed(2)} €\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid gap-2 md:grid-cols-4\">\r\n        <input\r\n          className=\"rounded-lg border px-3 py-2\"\r\n          placeholder=\"Kërko (klient/targë/VIN)…\"\r\n          value={q}\r\n          onChange={(e) => setQ(e.target.value)}\r\n        />\r\n        <select className=\"rounded-lg border px-3 py-2\" value={statusi} onChange={(e) => setStatusi(e.target.value)}>\r\n          <option value=\"\">Të gjitha statuset</option>\r\n          <option value=\"Hap\">Hap</option>\r\n          <option value=\"Mbyllur\">Mbyllur</option>\r\n        </select>\r\n        <input\r\n          className=\"rounded-lg border px-3 py-2\"\r\n          type=\"month\"\r\n          value={ym}\r\n          onChange={(e) => setYm(e.target.value)}\r\n        />\r\n        <button className=\"rounded-lg bg-black px-3 py-2 text-white\" onClick={load}>\r\n          Filtro\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"rounded-xl border bg-white p-4\">\r\n        <h2 className=\"font-semibold\">Lista</h2>\r\n\r\n        {loading ? (\r\n          <div className=\"mt-2 text-sm text-gray-700\">Duke ngarku…</div>\r\n        ) : items.length === 0 ? (\r\n          <div className=\"mt-2 text-sm text-gray-700\">S’ka servise.</div>\r\n        ) : (\r\n          <div className=\"mt-3 overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"border-b text-left text-gray-800\">\r\n                <tr>\r\n                  <th className=\"py-2\">Data</th>\r\n                  <th>Klienti</th>\r\n                  <th>Automjeti</th>\r\n                  <th>Targa</th>\r\n                  <th>Status</th>\r\n                  <th>Total (€)</th>\r\n                  <th>Paguar (€)</th>\r\n                  <th>Borxh (€)</th>\r\n                  <th className=\"text-right\">Veprime</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((s) => (\r\n                  <tr key={s.servisId} className=\"border-b align-top\">\r\n                    <td className=\"py-2\">{new Date(s.dataServisit).toLocaleDateString()}</td>\r\n                    <td>\r\n                      {s.klient.emri} {s.klient.mbiemri ?? \"\"}\r\n                      {s.klient.telefoni ? <div className=\"text-gray-700\">{s.klient.telefoni}</div> : null}\r\n                    </td>\r\n                    <td>{[s.automjet.marka, s.automjet.modeli, s.automjet.viti].filter(Boolean).join(\" \")}</td>\r\n                    <td>{s.automjet.targa ?? \"\"}</td>\r\n                    <td>{s.statusi}</td>\r\n                    <td>{Number(s.total).toFixed(2)}</td>\r\n                    <td>{Number(s.paguar).toFixed(2)}</td>\r\n                    <td className={Number(s.borxh) <= 0 ? \"text-green-700 font-semibold\" : \"text-red-700 font-semibold\"}>\r\n                      {Number(s.borxh).toFixed(2)}\r\n                    </td>\r\n                    <td className=\"text-right\">\r\n                      <Link className=\"rounded-lg border px-2 py-1 hover:bg-gray-50\" href={`/servise/${s.servisId}`}>\r\n                        Hape\r\n                      </Link> \r\n                      \r\n                      <button\r\n                        className=\"rounded-lg border px-2 py-1 hover:bg-gray-50\"\r\n                        onClick={() => delServis(s.servisId)}\r\n                      >\r\n                        Fshi\r\n                      </button>\r\n                    </td>\r\n                    \r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,0JACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}