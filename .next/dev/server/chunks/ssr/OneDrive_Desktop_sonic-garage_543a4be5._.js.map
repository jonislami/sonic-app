{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/src/app/raporte/ditore/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\nfunction eur(n: number) {\r\n  return new Intl.NumberFormat(\"sq-AL\", { style: \"currency\", currency: \"EUR\" }).format(Number(n || 0));\r\n}\r\n\r\nfunction todayISO() {\r\n  const d = new Date();\r\n  const yyyy = d.getFullYear();\r\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\r\n  const dd = String(d.getDate()).padStart(2, \"0\");\r\n  return `${yyyy}-${mm}-${dd}`;\r\n}\r\n\r\ntype ShpenzimRow = {\r\n  shpenzimId: string;\r\n  data: string | null;\r\n  pershkrimi: string;\r\n  kategoria: string | null;\r\n  shuma: number;\r\n  shenim: string | null;\r\n};\r\n\r\ntype DaljeRow = {\r\n  levizjeId: string;\r\n  data: string | null;\r\n  sasia: number;\r\n  cmimiBlerje: number;\r\n  cmimiShitje: number;\r\n  kosto: number;\r\n  shitje: number;\r\n  fitim: number;\r\n  shenim: string | null;\r\n  pjese: {\r\n    inventarId: string;\r\n    emri: string;\r\n    kodi: string | null;\r\n    marka: string | null;\r\n    modeli: string | null;\r\n  };\r\n};\r\n\r\ntype DailyResponse = {\r\n  ok: boolean;\r\n  date: string;\r\n\r\n  teHyraFatura: number;\r\n\r\n  pagesaAplikuar: number;\r\n  bakshish: number;\r\n  teHyraCash: number;\r\n\r\n  kostoPjesesh: number;\r\n  shpenzimeTjera: number;\r\n  fitimNeto: number;\r\n\r\n  borxhInfo: number;\r\n\r\n  shpenzimeList: ShpenzimRow[];\r\n  daljeList: DaljeRow[];\r\n\r\n  daljeKostoTotal: number;\r\n  daljeShitjeTotal: number;\r\n  daljeFitimTotal: number;\r\n};\r\n\r\nexport default function RaporteDitorePage() {\r\n  const [date, setDate] = useState(todayISO());\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState<string | null>(null);\r\n  const [r, setR] = useState<DailyResponse | null>(null);\r\n\r\n  async function load() {\r\n    setLoading(true);\r\n    setErr(null);\r\n\r\n    const res = await fetch(`/api/raporte/ditore?d=${encodeURIComponent(date)}`, { cache: \"no-store\" });\r\n    const d = await res.json().catch(() => ({}));\r\n\r\n    if (!res.ok) {\r\n      setErr(d?.error ?? \"Gabim\");\r\n      setR(null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setR(d);\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const cards = useMemo(() => {\r\n    const x = r ?? ({\r\n      teHyraFatura: 0,\r\n      pagesaAplikuar: 0,\r\n      bakshish: 0,\r\n      teHyraCash: 0,\r\n      kostoPjesesh: 0,\r\n      shpenzimeTjera: 0,\r\n      fitimNeto: 0,\r\n      borxhInfo: 0,\r\n    } as any);\r\n\r\n    return [\r\n      { title: \"Të hyra (Fatura)\", value: eur(x.teHyraFatura), sub: \"nga rreshtat e faturave (krijim fature)\" },\r\n      { title: \"Pagesa (aplikuar)\", value: eur(x.pagesaAplikuar), sub: \"pagesa që mbulojnë faturat\" },\r\n      { title: \"Bakshish\", value: eur(x.bakshish), sub: \"overpay mbi totalin e faturës\" },\r\n      { title: \"Cash total\", value: eur(x.teHyraCash), sub: \"pagesa + bakshish\" },\r\n      { title: \"Kosto pjesësh\", value: eur(x.kostoPjesesh), sub: \"kosto blerje (DALJE)\" },\r\n      { title: \"Shpenzime tjera\", value: eur(x.shpenzimeTjera), sub: \"nga shpenzimet\" },\r\n      {\r\n        title: \"Fitim neto\",\r\n        value: eur(x.fitimNeto),\r\n        sub: \"cash - kosto - shpenzime\",\r\n        good: x.fitimNeto >= 0,\r\n      },\r\n      { title: \"Borxh (info)\", value: eur(x.borxhInfo), sub: \"fatura të asaj dite pa u mbuluar\" },\r\n    ];\r\n  }, [r]);\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"max-w-6xl border rounded-2xl bg-white p-5\">\r\n        <div className=\"flex items-start justify-between gap-4\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-semibold\">Raporte Ditore</h1>\r\n            <p className=\"text-sm text-gray-600\">Përmbledhje ditore (EUR).</p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"text-sm text-gray-700\">Data</div>\r\n            <input\r\n              type=\"date\"\r\n              className=\"border rounded-lg px-3 py-2\"\r\n              value={date}\r\n              onChange={(e) => setDate(e.target.value)}\r\n            />\r\n            <button className=\"bg-black text-white rounded-lg px-4 py-2\" onClick={load}>\r\n              Shfaq\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {err ? (\r\n          <div className=\"mt-3 rounded-lg border border-red-200 bg-red-50 p-3 text-red-700 text-sm\">{err}</div>\r\n        ) : null}\r\n\r\n        {loading ? (\r\n          <div className=\"mt-4 text-sm text-gray-700\">Duke ngarkuar…</div>\r\n        ) : (\r\n          <>\r\n            <div className=\"mt-5 grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n              {cards.map((c) => (\r\n                <div key={c.title} className=\"border rounded-xl p-4\">\r\n                  <div className=\"text-sm text-gray-600\">{c.title}</div>\r\n                  <div\r\n                    className={`text-xl font-semibold ${\r\n                      c.title === \"Fitim neto\" ? (c.good ? \"text-green-700\" : \"text-red-700\") : \"\"\r\n                    }`}\r\n                  >\r\n                    {c.value}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 mt-1\">{c.sub}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* SHPENZIME */}\r\n            <div className=\"mt-6 border rounded-xl p-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"font-semibold\">Shpenzimet (dita)</div>\r\n                <div className=\"text-sm text-gray-700\">Total: <b>{eur(r?.shpenzimeTjera ?? 0)}</b></div>\r\n              </div>\r\n\r\n              {(r?.shpenzimeList ?? []).length === 0 ? (\r\n                <div className=\"mt-2 text-sm text-gray-700\">S’ka shpenzime.</div>\r\n              ) : (\r\n                <div className=\"mt-3 overflow-x-auto\">\r\n                  <table className=\"w-full text-sm\">\r\n                    <thead className=\"border-b text-left text-gray-800\">\r\n                      <tr>\r\n                        <th className=\"py-2\">Data</th>\r\n                        <th>Kategoria</th>\r\n                        <th>Përshkrimi</th>\r\n                        <th>Shënim</th>\r\n                        <th className=\"text-right\">Shuma</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {r!.shpenzimeList.map((x) => (\r\n                        <tr key={x.shpenzimId} className=\"border-b\">\r\n                          <td className=\"py-2\">{x.data ? new Date(x.data).toLocaleString() : \"-\"}</td>\r\n                          <td>{x.kategoria ?? \"-\"}</td>\r\n                          <td>{x.pershkrimi}</td>\r\n                          <td>{x.shenim ?? \"\"}</td>\r\n                          <td className=\"text-right font-semibold\">{eur(x.shuma)}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* DALJET INVENTAR */}\r\n            <div className=\"mt-6 border rounded-xl p-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"font-semibold\">Daljet e inventarit (dita)</div>\r\n                <div className=\"text-sm text-gray-700\">\r\n                  Kosto: <b>{eur(r?.daljeKostoTotal ?? 0)}</b> • Fitim:{\" \"}\r\n                  <b className={(r?.daljeFitimTotal ?? 0) >= 0 ? \"text-green-700\" : \"text-red-700\"}>\r\n                    {eur(r?.daljeFitimTotal ?? 0)}\r\n                  </b>\r\n                </div>\r\n              </div>\r\n\r\n              {(r?.daljeList ?? []).length === 0 ? (\r\n                <div className=\"mt-2 text-sm text-gray-700\">S’ka dalje.</div>\r\n              ) : (\r\n                <div className=\"mt-3 overflow-x-auto\">\r\n                  <table className=\"w-full text-sm\">\r\n                    <thead className=\"border-b text-left text-gray-800\">\r\n                      <tr>\r\n                        <th className=\"py-2\">Data</th>\r\n                        <th>Pjesa</th>\r\n                        <th>Kodi</th>\r\n                        <th>Sasia</th>\r\n                        <th>Cmimi blerje</th>\r\n                        <th>Cmimi shitje</th>\r\n                        <th>Kosto</th>\r\n                        <th>Fitim</th>\r\n                        <th>Shënim</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {r!.daljeList.map((x) => (\r\n                        <tr key={x.levizjeId} className=\"border-b\">\r\n                          <td className=\"py-2\">{x.data ? new Date(x.data).toLocaleString() : \"-\"}</td>\r\n                          <td>{x.pjese?.emri ?? \"Pjesë\"}</td>\r\n                          <td>{x.pjese?.kodi ?? \"-\"}</td>\r\n                          <td>{Number(x.sasia ?? 0)}</td>\r\n                          <td>{Number(x.cmimiBlerje ?? 0).toFixed(2)} €</td>\r\n                          <td>{Number(x.cmimiShitje ?? 0).toFixed(2)} €</td>\r\n                          <td className=\"font-semibold\">{Number(x.kosto ?? 0).toFixed(2)} €</td>\r\n                          <td className={`font-semibold ${Number(x.fitim ?? 0) >= 0 ? \"text-green-700\" : \"text-red-700\"}`}>\r\n                            {Number(x.fitim ?? 0).toFixed(2)} €\r\n                          </td>\r\n                          <td>{x.shenim ?? \"\"}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  <div className=\"mt-3 text-sm text-right\">\r\n                    <div>Total Kosto: <b>{eur(r?.daljeKostoTotal ?? 0)}</b></div>\r\n                    <div>Total Shitje (info): <b>{eur(r?.daljeShitjeTotal ?? 0)}</b></div>\r\n                    <div className={(r?.daljeFitimTotal ?? 0) >= 0 ? \"text-green-700\" : \"text-red-700\"}>\r\n                      Total Fitim: <b>{eur(r?.daljeFitimTotal ?? 0)}</b>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 735, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonis/OneDrive/Desktop/sonic-garage/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,0JACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}